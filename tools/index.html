<!DOCTYPE html>
<html>
<head>
<title>Medplum Logo</title>
</head>
<body>
</body>
<script>

const logo = `
<svg xmlns="http://www.w3.org/2000/svg" width="2in" height="2in" viewBox="0 0 50.8 50.8" baseProfile="tiny-ps" version="1.2">
<path fill="#ad7136" d="M28.796 6.964c.62-1.655 1.655-3 3-4.139L29.52.031a12.2 12.2 0 0 0-4.45 7.037l1.76 2.38z" />
<path fill="#7e4f9b" d="M31.797 6.55c-1.76 0-3.415.414-4.968 1.139-1.655-.725-3.311-1.139-5.07-1.139-9.003 0-16.35 9.935-16.35 22.145 0 12.211 7.347 22.146 16.35 22.146 1.759 0 3.415-.414 5.07-1.139 1.553.725 3.208 1.139 4.968 1.139 9.002 0 16.35-9.935 16.35-22.146 0-12.21-7.348-22.145-16.35-22.145Z" />
<path fill="#5a2878" d="m23.518 50.634-1.76.207c-9.002 0-16.35-9.935-16.35-22.146 0-12.21 7.348-22.145 16.35-22.145l1.76.104c-4.036 1.242-7.244 10.555-7.244 22.041 0 11.487 3.208 20.8 7.244 21.939z" />
<path fill="#70d65b" d="M21.034 22.797a18.213 18.213 0 0 1-18.316 4.45A18.213 18.213 0 0 1 25.588 4.48l.103.517c1.76 6.106.207 12.935-4.657 17.799z" />
<path fill="#58b741" d="M25.691 4.998A43.566 43.566 0 0 0 5.512 27.971l-2.794-.724A18.213 18.213 0 0 1 25.588 4.48Z" />
</svg>
`;

let html = '';

for (let i = 0; i <= 10; i++) {
  html += logo
    .replace('#7e4f9b', mix_hexes(['#7e4f9b', '#946af9'], i / 10))
    .replace('#5a2878', mix_hexes(['#5a2878', '#7857c5'], i / 10))
    .replace('#70d65b', mix_hexes(['#70d65b', '#40bc26'], i / 10))
    .replace('#58b741', mix_hexes(['#58b741', '#33961e'], i / 10));
}

document.body.innerHTML = html;

function hex2dec(hex) {
  return hex.replace('#', '').match(/.{2}/g).map(n => parseInt(n, 16));
}

function rgb2hex(r, g, b) {
  r = Math.round(r);
  g = Math.round(g);
  b = Math.round(b);
  r = Math.min(r, 255);
  g = Math.min(g, 255);
  b = Math.min(b, 255);
  return '#' + [r, g, b].map(c => c.toString(16).padStart(2, '0')).join('');
}

function rgb2cmyk(r, g, b) {
  let c = 1 - (r / 255);
  let m = 1 - (g / 255);
  let y = 1 - (b / 255);
  let k = Math.min(c, m, y);
  c = (c - k) / (1 - k);
  m = (m - k) / (1 - k);
  y = (y - k) / (1 - k);
  return [c, m, y, k];
}

function cmyk2rgb(c, m, y, k) {
  let r = c * (1 - k) + k;
  let g = m * (1 - k) + k;
  let b = y * (1 - k) + k;
  r = (1 - r) * 255 + .5;
  g = (1 - g) * 255 + .5;
  b = (1 - b) * 255 + .5;
  return [r, g, b];
}

function mix_cmyks(cmyks, weight) {
  const r1 = 1.0 - weight;
  const r2 = weight;
  // const r1 = Math.random();
  // const r2 = 1.0 - r1;
  // let c = cmyks.map(cmyk => cmyk[0]).reduce((a, b) => a + b, 0) / cmyks.length;
  // let m = cmyks.map(cmyk => cmyk[1]).reduce((a, b) => a + b, 0) / cmyks.length;
  // let y = cmyks.map(cmyk => cmyk[2]).reduce((a, b) => a + b, 0) / cmyks.length;
  // let k = cmyks.map(cmyk => cmyk[3]).reduce((a, b) => a + b, 0) / cmyks.length;
  let c = r1 * cmyks[0][0] + r2 * cmyks[1][0];
  let m = r1 * cmyks[0][1] + r2 * cmyks[1][1];
  let y = r1 * cmyks[0][2] + r2 * cmyks[1][2];
  let k = r1 * cmyks[0][3] + r2 * cmyks[1][3];
  return [c, m, y, k];
}

function mix_hexes(hexes, weight) {
  let rgbs = hexes.map(hex => hex2dec(hex)); 
  let cmyks = rgbs.map(rgb => rgb2cmyk(...rgb));
  let mixture_cmyk = mix_cmyks(cmyks, weight);
  let mixture_rgb = cmyk2rgb(...mixture_cmyk);
  let mixture_hex = rgb2hex(...mixture_rgb);
  return mixture_hex;
}

</script>
</html>
